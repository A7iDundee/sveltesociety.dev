<script>
  import recipes from "./recipes.json";
  // data shape:
  /**
   * 
   *  {
   * "slug": "data",
    "title": "Data Fetching",
    "contents": "..."
  },
  {
    "slug": "preprocessors",
    "title": "Build Setup Recipes",
    "contents": "..."
  }
   * 
   * */
  const _recipes = Object.entries(recipes).map(([k, v]) => {
    v.slug = k;
    return v;
  });
  export let slug;
  $: currentRecipe = slug ? _recipes.find(r => r.slug === slug) : _recipes[0];
  $: console.log({ currentRecipe, slug });
</script>

<style>
  main {
    display: flex;

    margin: 0 auto;
    max-width: var(--width-content);
    padding: 2rem 1rem;
  }
  .TOC {
    margin-right: 2rem;
    flex: 1;
    /* font-family: Overpass;
    font-style: normal;
    font-weight: bold;
    font-size: 29px;
    line-height: 150%; */
    /* or 43px */

    color: #2e2e35;
  }
  article {
    flex: 3;
    margin-left: 2rem;
  }
  :global(article blockquote) {
    background: #ff3e01;
    opacity: 0.2;
    border-radius: 5px 0px 0px 5px;
    color: black;
    border-left: 2px solid #ff3e01;
  }
  .TOCLink {
    padding: 1rem;
    border-bottom: 1px solid #d0deec;
  }
</style>

<svelte:head>
  <title>Svelte Recipes</title>
</svelte:head>
<main>
  <div class="TOC">
    <h1>table of contents</h1>
    <div>
      {#each _recipes as item}
        <div class="TOCLink">
          {#if item.slug === currentRecipe.slug}
            <svg
              width="21"
              height="20"
              viewBox="0 0 21 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12.7061 20C11.3467 20 10.0914 19.6647 8.9402 18.9941C7.78898
                18.3236 6.88167 17.4154 6.21825 16.2695C5.55484 15.1237 5.22313
                13.8672 5.22313 12.5C5.22313 11.4323 5.45077 10.3971 5.90606
                9.39453H4.59874V6.26953H3.38898L2.72557
                5.58594V4.39453H1.53533L1.47679
                4.33594V3.14453H0.364594C0.260529 2.9362 0.221504 2.72135
                0.24752 2.5H0.208496V0H2.70606V0.0390625C3.07028 0 3.37598
                0.0976562 3.62313 0.332031L9.16459 5.89844C10.2703 5.3125
                11.4475 5.01953 12.6963 5.01953C14.0622 5.01953 15.3174 5.35156
                16.4622 6.01562C17.6069 6.67969 18.5142 7.58789 19.1841
                8.74023C19.854 9.89258 20.189 11.1491 20.189 12.5098C20.189
                13.8704 19.854 15.1237 19.1841 16.2695C18.5142 17.4154 17.6069
                18.3236 16.4622 18.9941C15.3174 19.6647 14.0654 20 12.7061
                20ZM2.12069 0.644531L1.47679 1.28906L7.70118 7.51953L8.34508
                6.875L2.12069 0.644531ZM13.9451 11.25C13.2556 11.25 12.667
                11.4941 12.1792 11.9824C11.6914 12.4707 11.4475 13.0599 11.4475
                13.75C11.4475 14.4401 11.6914 15.0293 12.1792 15.5176C12.667
                16.0059 13.2556 16.25 13.9451 16.25C14.6345 16.25 15.2231
                16.0059 15.7109 15.5176C16.1987 15.0293 16.4426 14.4401 16.4426
                13.75C16.4426 13.0599 16.1987 12.4707 15.7109 11.9824C15.2231
                11.4941 14.6345 11.25 13.9451 11.25Z"
                fill="black" />
            </svg>
          {:else}
            <svg
              width="21"
              height="20"
              viewBox="0 0 21 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M5.2425 1.50003C4.58458 2.1597 4.21511 3.05335 4.21511
                3.98503C4.21511 4.9167 4.58458 5.81036 5.2425 6.47003L13.7325
                14.95C14.3125 15.54 14.3125 16.5 13.7325 17.07C13.1425 17.66
                12.1925 17.66 11.6025 17.07L7.3625 12.83L8.4225 11.77L4.8925
                8.23003L4.5325 8.59003L3.1225 7.17003C2.93174 6.98253 2.67497
                6.87747 2.4075 6.87747C2.14003 6.87747 1.88326 6.98253 1.6925
                7.17003L0.2925 8.59003C-0.0975 9.00003 -0.0975 9.61003 0.2925
                10L1.6925 11.41L1.3525 11.77L4.8925 15.3L5.9525 14.24L10.1925
                18.5C10.8528 19.149 11.7417 19.5126 12.6675 19.5126C13.5934
                19.5126 14.4822 19.149 15.1425 18.5C16.5125 17.12 16.5125 14.9
                15.1425 13.54L6.6525 5.05003C6.0725 4.46003 6.0725 3.50003
                6.6525 2.93003C7.2425 2.34003 8.1925 2.34003 8.7825
                2.93003L13.0225 7.17003L11.9625 8.23003L15.4925 11.77L15.8525
                11.41L17.2625 12.83C17.6525 13.22 18.2925 13.22 18.6925
                12.83L20.0925 11.41C20.4825 11 20.4825 10.39 20.0925 10L18.6925
                8.59003L19.0325 8.23003L15.4925 4.70003L14.4325 5.76003L10.1925
                1.50003C9.53216 0.851067 8.64335 0.487427 7.7175
                0.487427C6.79165 0.487427 5.90284 0.851067 5.2425
                1.50003ZM1.0025 9.29003L2.4125 7.88003L3.8325 9.29003L2.4125
                10.71L1.0025 9.29003ZM16.5525 10.71L17.9725 9.29003L19.3825
                10.71L17.9725 12.12L16.5525 10.71Z"
                fill="black" />
            </svg>
          {/if}
          <a href={`/recipes/${item.slug}`}>{item.title}</a>
        </div>
      {/each}
    </div>
  </div>
  <article>
    {@html currentRecipe.contents}
  </article>
</main>
